var g=Object.defineProperty;var S=(e,a,h)=>a in e?g(e,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[a]=h;var n=(e,a,h)=>(S(e,typeof a!="symbol"?a+"":a,h),h);function w(e,a){let h=Math.min(e,a);for(;h>0&&!(e%h===0&&a%h===0);)h--;return h}function b(e,a){let h=w(e,a);return{num:e/h,denom:a/h}}function I(e){class a{constructor(t){n(this,"radius");n(this,"y");n(this,"lineLen");n(this,"points",[]);n(this,"steps",[]);n(this,"draw",()=>{this.drawBase();let t=this.steps[this.current],i=this.points[this.current];if(t){e.circle(t.x,t.y,this.radius*2),i&&(e.line(t.x,t.y,i.x,i.y),e.fill(255),e.circle(i.x,i.y,5)),e.noFill(),e.beginShape();for(let s=0;s<=this.current;s++){let r=this.points[s];r&&e.vertex(r.x,r.y)}e.endShape()}});n(this,"drawBase",()=>{});this.radius=t.radius,this.y=t.y??0,this.lineLen=t.lineLen??this.radius}get circumference(){return 2*e.PI*this.radius}get current(){let t=this.steps.length*2-2,i=e.frameCount%t;return i>this.steps.length-1&&(i=t-i),i}}let h=class extends a{constructor({radius:t,y:i=0,lineLen:s=t}){super({radius:t,y:i,lineLen:s});n(this,"drawBase",()=>{e.push(),e.strokeWeight(.5),e.line(-e.width/2,this.y+this.radius,e.width/2,this.y+this.radius),e.pop()});this.makeSteps()}get stepSize(){return this.radius*.005}makeSteps(){this.steps=[],this.points=[];let t=-e.width/2,i=e.PI*.5,s=this.stepSize/(e.PI*2),r=this.circumference*s;for(;t<=e.width/2+this.radius;){i+=this.stepSize,t+=r;let u=e.cos(i)*this.lineLen+t,l=e.sin(i)*this.lineLen+this.y;this.steps.push({rotation:i,x:t,y:this.y}),this.points.push({x:u,y:l})}}};function R(d){return"ratio"in d}return{TrochoidOnLine:h,Epitrochoid:class extends a{constructor(t){let i,s,r;R(t)?(i=t.radius??30,s=i*t.ratio,r=t.ratio):(i=t.radius,s=t.baseRadius);let u=t.y??0,l=t.cx??0,o=t.lineLen??i;super({radius:i,y:u,lineLen:o});n(this,"_baseRadius");n(this,"cx");n(this,"ratio");n(this,"drawBase",()=>{e.push(),e.strokeWeight(.5),e.noFill(),e.circle(this.cx,this.y,this.baseRadius*2),e.pop()});r&&(this.ratio=r),this._baseRadius=s,this.cx=l,this.makeSteps()}get baseRadius(){return this.ratio?this.radius*this.ratio:this._baseRadius}set baseRadius(t){this._baseRadius=t}get circumferenceBase(){return 2*e.PI*this.baseRadius}makeSteps(){this.steps=[],this.points=[];let t=0,i=this.circumferenceBase,s=0,{denom:r}=b(this.radius,this.baseRadius),u=Math.ceil(Math.PI*2*r),l=e.min(e.map(r,1,60,this.radius*.1,this.radius*.3),this.radius*.3),o=l/this.circumference*e.PI*2;for(;s<=u;){t+=l;let c=t/i*e.PI*2;s+=o;let x=e.cos(c)*(this.radius+this.baseRadius),m=e.sin(c)*(this.radius+this.baseRadius),y=x-e.cos(c+s)*this.lineLen,f=m-e.sin(c+s)*this.lineLen;this.points.push({x:y,y:f}),this.steps.push({rotation:s,x,y:m})}}},Hypotrochoid:class extends a{constructor(t){let i=t.radius,s=t.baseRadius??i,r=t.y??0,u=t.cx??0,l=t.lineLen??i;super({radius:i,y:r,lineLen:l});n(this,"baseRadius");n(this,"cx");n(this,"drawBase",()=>{e.push(),e.strokeWeight(.5),e.noFill(),e.circle(this.cx,this.y,this.baseRadius*2),e.pop()});this.baseRadius=s,this.cx=u,this.makeSteps()}get circumferenceBase(){return 2*e.PI*this.baseRadius}makeSteps(){this.steps=[],this.points=[];let t=0,i=this.circumferenceBase,s=0,{denom:r}=b(this.radius,this.baseRadius),u=Math.ceil(Math.PI*2*r),l=e.min(e.map(r,1,60,this.radius*.1,this.radius*.3),this.radius*.3),o=l/this.circumference*e.PI*2;for(;s>=u*-1;){t+=l;let c=t/i*e.PI*2;s-=o;let x=e.cos(c)*(this.baseRadius-this.radius),m=e.sin(c)*(this.baseRadius-this.radius),y=x+e.cos(c+s)*this.lineLen,f=m+e.sin(c+s)*this.lineLen;this.points.push({x:y,y:f}),this.steps.push({rotation:s,x,y:m})}}}}}export{I as f};
